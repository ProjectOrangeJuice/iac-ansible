(reverse_proxy_forward) {
    reverse_proxy https://192.168.2.15:443 {
        transport http {
            tls_insecure_skip_verify
        }
    }
}

(gateway) {
    forward_auth caddy-project-gateway-1:9090 {
	    uri          /access
        @unauth status 401
        handle_response @unauth {
            replace_status 418
        }
    }
}

gemini.{{domain_name}} {
    import reverse_proxy_forward
    import gateway
}